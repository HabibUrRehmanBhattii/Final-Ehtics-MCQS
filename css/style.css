/* ============================================
   LLQP Exam Prep – Premium Design System v2
   ============================================ */

/* ── Design Tokens ── */
:root {
  --c-bg:          #f0f2f5;
  --c-surface:     #ffffff;
  --c-surface2:    #f5f6f8;
  --c-surface3:    #ebedf2;
  --c-border:      #dfe3ea;
  --c-text:        #111827;
  --c-text2:       #6b7280;
  --c-text3:       #9ca3af;
  --c-primary:     #6366f1;
  --c-primary2:    #4f46e5;
  --c-primary-a:   rgba(99,102,241,.12);
  --c-ok:          #10b981;
  --c-ok2:         #059669;
  --c-ok-bg:       #ecfdf5;
  --c-ok-a:        rgba(16,185,129,.15);
  --c-err:         #ef4444;
  --c-err2:        #dc2626;
  --c-err-bg:      #fef2f2;
  --c-err-a:       rgba(239,68,68,.15);
  --c-warn:        #f59e0b;
  --c-warn2:       #d97706;
  --c-warn-bg:     #fffbeb;
  --c-warn-a:      rgba(245,158,11,.12);

  --radius:        16px;
  --radius-sm:     10px;
  --radius-xs:     6px;

  --shadow-xs:     0 1px 2px rgba(0,0,0,.04);
  --shadow:        0 1px 3px rgba(0,0,0,.05), 0 2px 8px rgba(0,0,0,.04);
  --shadow-md:     0 4px 16px rgba(0,0,0,.06), 0 1px 4px rgba(0,0,0,.03);
  --shadow-lg:     0 8px 32px rgba(0,0,0,.08), 0 2px 8px rgba(0,0,0,.04);

  --font:          'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  --ease:          cubic-bezier(.4,0,.2,1);
  --ease-out:      cubic-bezier(0,0,.2,1);
  --ease-spring:   cubic-bezier(.34,1.56,.64,1);
}

[data-theme="dark"] {
  --c-bg:        #0B1120;
  --c-surface:   #141B2D;
  --c-surface2:  #1A2336;
  --c-surface3:  #212D42;
  --c-border:    #1E2B40;
  --c-text:      #E8ECF4;
  --c-text2:     #8899B0;
  --c-text3:     #5A6B82;
  --c-primary:   #818cf8;
  --c-primary2:  #6366f1;
  --c-primary-a: rgba(129,140,248,.12);
  --c-ok-bg:     rgba(16,185,129,.06);
  --c-ok-a:      rgba(16,185,129,.10);
  --c-err-bg:    rgba(239,68,68,.06);
  --c-err-a:     rgba(239,68,68,.10);
  --c-warn-bg:   rgba(245,158,11,.06);
  --c-warn-a:    rgba(245,158,11,.10);

  --shadow-xs:   0 1px 2px rgba(0,0,0,.2);
  --shadow:      0 1px 3px rgba(0,0,0,.22), 0 2px 8px rgba(0,0,0,.18);
  --shadow-md:   0 4px 16px rgba(0,0,0,.25);
  --shadow-lg:   0 8px 32px rgba(0,0,0,.3);
}

/* ── Reset ── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }

body {
  font-family: var(--font);
  background: var(--c-bg);
  color: var(--c-text);
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

button { font-family: inherit; }

/* ── Utility ── */
.view        { display: none; min-height: 100vh; }
.view.active { display: flex; flex-direction: column; }
.hidden      { display: none !important; }

.wrap {
  width: 100%;
  max-width: 800px;
  margin: 0 auto;
  padding: 2rem 1.25rem;
  flex: 1;
}

/* ════════════════════════════════════
   HERO
   ════════════════════════════════════ */
.hero {
  background: linear-gradient(135deg, #6366f1 0%, #4338ca 50%, #6366f1 100%);
  background-size: 200% 200%;
  animation: gradientShift 8s ease infinite;
  padding: 3.5rem 1.25rem 3rem;
  text-align: center;
  position: relative;
  overflow: hidden;
}
.hero::before {
  content: '';
  position: absolute; inset: 0;
  background: radial-gradient(circle at 30% 50%, rgba(255,255,255,.08), transparent 60%);
  pointer-events: none;
}
.hero-title {
  font-size: 1.85rem; font-weight: 800; color: #fff;
  letter-spacing: -.02em; position: relative;
}
.hero-sub {
  font-size: 1.05rem; color: rgba(255,255,255,.75);
  margin-top: .35rem; font-weight: 400; position: relative;
}

/* Dark mode toggle */
.dm-toggle {
  position: absolute; top: 1.25rem; right: 1.25rem;
  width: 44px; height: 44px; border-radius: 50%;
  background: rgba(255,255,255,.12); border: 1.5px solid rgba(255,255,255,.2);
  font-size: 1.2rem; cursor: pointer;
  display: grid; place-items: center;
  transition: all .25s var(--ease);
  backdrop-filter: blur(12px);
}
.dm-toggle:hover {
  background: rgba(255,255,255,.22);
  transform: rotate(20deg) scale(1.05);
}

/* ════════════════════════════════════
   TOP BAR
   ════════════════════════════════════ */
.topbar {
  display: flex; align-items: center; justify-content: space-between;
  padding: .85rem 1.25rem;
  background: rgba(255,255,255,.85);
  border-bottom: 1px solid var(--c-border);
  position: sticky; top: 0; z-index: 50;
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
}
[data-theme="dark"] .topbar {
  background: rgba(20,27,45,.85);
}
.topbar-title {
  font-size: 1rem; font-weight: 700;
  flex: 1; text-align: center;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.topbar-icon { font-size: 1.5rem; width: 60px; text-align: right; }

.pill {
  font-size: .78rem; font-weight: 700;
  background: var(--c-primary); color: #fff;
  padding: .3rem .8rem; border-radius: 20px;
  letter-spacing: .02em;
}

/* ════════════════════════════════════
   PROGRESS BAR
   ════════════════════════════════════ */
.progress-track {
  height: 3px;
  background: var(--c-border);
  position: sticky; top: 52px; z-index: 49;
  overflow: hidden;
}
.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--c-primary), #a78bfa);
  border-radius: 0 4px 4px 0;
  transition: width .4s var(--ease);
  position: relative;
}
.progress-fill::after {
  content: '';
  position: absolute; right: 0; top: -1px; bottom: -1px;
  width: 20px;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,.35));
  border-radius: 4px;
}

/* ════════════════════════════════════
   SECTION LABEL
   ════════════════════════════════════ */
.section-label {
  font-size: .75rem; font-weight: 700; text-transform: uppercase; letter-spacing: .1em;
  color: var(--c-text3); margin-bottom: 1.25rem;
}
.muted-text {
  color: var(--c-text2); font-size: .92rem; margin-bottom: 1.5rem; line-height: 1.6;
}

/* ════════════════════════════════════
   WRONG ANSWERS CARD
   ════════════════════════════════════ */
.wrong-wrap { margin-bottom: 1.5rem; }
.wrong-card {
  display: flex; align-items: center; gap: .85rem;
  background: linear-gradient(135deg, #ef4444, #dc2626);
  color: #fff; padding: 1rem 1.25rem; border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all .2s var(--ease);
  box-shadow: 0 2px 12px rgba(239,68,68,.2);
}
.wrong-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 24px rgba(239,68,68,.3);
}
.wrong-icon  { font-size: 1.3rem; }
.wrong-info  { flex: 1; display: flex; flex-direction: column; gap: .15rem; }
.wrong-info strong { font-size: .92rem; }
.wrong-count { font-size: .78rem; opacity: .85; }
.wrong-arrow { font-size: 1.3rem; font-weight: 700; transition: transform .2s var(--ease); }
.wrong-card:hover .wrong-arrow { transform: translateX(4px); }

/* ════════════════════════════════════
   GRID (Topics + Tests)
   ════════════════════════════════════ */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 1rem;
}

.topic-card, .practice-test-card {
  background: var(--c-surface);
  border: 1.5px solid var(--c-border);
  border-radius: var(--radius);
  padding: 1.4rem;
  cursor: pointer;
  transition: all .25s var(--ease);
  display: flex; flex-direction: column; gap: .5rem;
  position: relative;
  overflow: hidden;
}
.topic-card::before, .practice-test-card::before {
  content: '';
  position: absolute; inset: 0;
  background: linear-gradient(135deg, var(--c-primary-a), transparent);
  opacity: 0;
  transition: opacity .25s var(--ease);
}
.topic-card:hover, .practice-test-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
  border-color: var(--c-primary);
}
.topic-card:hover::before, .practice-test-card:hover::before { opacity: 1; }
.topic-icon  { font-size: 2.2rem; position: relative; }
.topic-name  { font-size: 1.08rem; font-weight: 700; position: relative; }
.topic-description { font-size: .82rem; color: var(--c-text2); position: relative; }
.topic-meta  { display: flex; flex-wrap: wrap; gap: .5rem; margin-top: auto; padding-top: .6rem; position: relative; }
.question-count { font-size: .75rem; color: var(--c-text2); }
.progress-badge {
  font-size: .7rem; font-weight: 700; background: var(--c-ok); color: #fff;
  padding: .18rem .55rem; border-radius: 20px;
}
.coming-soon-badge {
  font-size: .7rem; font-weight: 600; background: var(--c-surface3); color: var(--c-text3);
  padding: .18rem .55rem; border-radius: 20px;
}

.btn-start, .btn-start-test {
  margin-top: .6rem; padding: .55rem 1.1rem;
  background: var(--c-primary); color: #fff; border: none; border-radius: var(--radius-sm);
  font-weight: 600; font-size: .88rem; cursor: pointer;
  transition: all .2s var(--ease);
  position: relative;
}
.btn-start:hover, .btn-start-test:hover {
  background: var(--c-primary2);
  box-shadow: 0 4px 12px rgba(99,102,241,.25);
  transform: translateY(-1px);
}

.test-number {
  width: 2.2rem; height: 2.2rem; border-radius: 50%;
  background: var(--c-primary); color: #fff;
  display: grid; place-items: center;
  font-weight: 700; font-size: .88rem;
  position: relative;
}
.test-name { font-size: 1.02rem; font-weight: 700; position: relative; }
.test-description { font-size: .82rem; color: var(--c-text2); position: relative; }
.test-meta { font-size: .75rem; color: var(--c-text2); margin-top: auto; position: relative; }

/* ════════════════════════════════════
   QUESTION NAV
   ════════════════════════════════════ */
.q-nav {
  display: flex; align-items: center; justify-content: center; gap: .5rem;
  margin-bottom: 1.25rem; padding: .85rem;
  background: var(--c-surface); border: 1px solid var(--c-border);
  border-radius: var(--radius); box-shadow: var(--shadow-xs);
  flex-wrap: wrap;
}
.q-dots {
  display: flex; gap: .4rem; flex-wrap: wrap; justify-content: center;
}

.question-dot {
  width: 2.2rem; height: 2.2rem;
  display: grid; place-items: center;
  font-size: .72rem; font-weight: 700;
  border: 2px solid var(--c-border); border-radius: var(--radius-xs);
  background: var(--c-surface); color: var(--c-text3);
  cursor: pointer;
  transition: all .2s var(--ease);
}
.question-dot:hover:not(.is-active) {
  border-color: var(--c-primary); color: var(--c-primary);
  transform: translateY(-2px); box-shadow: 0 3px 8px var(--c-primary-a);
}
.question-dot.is-active {
  background: var(--c-primary); color: #fff; border-color: var(--c-primary);
  box-shadow: 0 2px 8px var(--c-primary-a);
}
.question-dot.is-viewed   { background: var(--c-surface2); color: var(--c-text2); }
.question-dot.is-bookmarked { border-color: var(--c-warn); border-width: 2.5px; }

/* Answered questions - clear visual feedback */
.question-dot.is-correct-dot {
  background: var(--c-ok); color: #fff; border-color: var(--c-ok);
  box-shadow: 0 2px 8px var(--c-ok-a);
  position: relative;
}
.question-dot.is-correct-dot::after {
  content: '✓';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 1.2em;
  font-weight: bold;
}

.question-dot.is-wrong-dot {
  background: var(--c-err); color: #fff; border-color: var(--c-err);
  box-shadow: 0 2px 8px var(--c-err-a);
  position: relative;
}
.question-dot.is-wrong-dot::after {
  content: '✗';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 1.2em;
  font-weight: bold;
}

.btn-dot-nav, .dot-nav-btn {
  width: 2.2rem; height: 2.2rem;
  display: grid; place-items: center;
  border: none; border-radius: var(--radius-xs);
  background: var(--c-primary); color: #fff;
  font-size: 1.15rem; font-weight: 700;
  cursor: pointer; transition: all .2s var(--ease);
}
.btn-dot-nav:hover, .dot-nav-btn:hover {
  background: var(--c-primary2);
  transform: translateY(-1px);
}
.btn-dot-nav:disabled {
  background: var(--c-surface2); color: var(--c-text3);
  cursor: not-allowed; transform: none;
}

/* ════════════════════════════════════
   QUESTION CARD
   ════════════════════════════════════ */
.card {
  background: var(--c-surface);
  border: 1.5px solid var(--c-border);
  border-radius: var(--radius);
  padding: 1.75rem;
  box-shadow: var(--shadow);
  margin-bottom: 1.25rem;
  animation: fadeIn .3s var(--ease);
}
.card-head {
  display: flex; justify-content: space-between; align-items: center;
  padding-bottom: .85rem; margin-bottom: 1.15rem;
  border-bottom: 1.5px solid var(--c-border);
}
.q-badge {
  font-size: .72rem; font-weight: 700; text-transform: uppercase; letter-spacing: .06em;
  background: linear-gradient(135deg, var(--c-primary), var(--c-primary2));
  color: #fff; padding: .35rem .8rem; border-radius: var(--radius-xs);
}
.btn-star {
  background: none; border: none; font-size: 1.5rem; cursor: pointer;
  transition: all .2s var(--ease-spring);
  line-height: 1;
}
.btn-star:hover { transform: scale(1.3) rotate(15deg); }

.q-text {
  font-size: 1.08rem; line-height: 1.85; margin-bottom: 1.4rem;
  white-space: pre-wrap; font-weight: 500;
}

/* ════════════════════════════════════
   OPTIONS
   ════════════════════════════════════ */
.opts { display: flex; flex-direction: column; gap: .65rem; }

.option {
  padding: 0;
  border: 1.5px solid var(--c-border);
  border-radius: var(--radius-sm);
  background: var(--c-surface);
  cursor: pointer; font-size: .95rem; line-height: 1.6;
  transition: all .2s var(--ease);
  display: flex; flex-direction: column;
  overflow: hidden;
}

.option-main {
  display: flex; align-items: flex-start; gap: .85rem;
  padding: .95rem 1.1rem;
}

.option-letter {
  width: 2rem; height: 2rem;
  min-width: 2rem;
  border-radius: 50%;
  display: grid; place-items: center;
  font-size: .78rem; font-weight: 700;
  background: var(--c-surface2); color: var(--c-text2);
  flex-shrink: 0;
  transition: all .25s var(--ease);
  border: 1.5px solid var(--c-border);
}
.option-text {
  flex: 1; padding-top: .15rem;
}

/* Option hover */
.option:hover:not(.is-correct):not(.is-incorrect):not(.was-attempted):not(.is-dimmed) {
  border-color: var(--c-primary);
  background: var(--c-surface2);
  transform: translateX(6px);
  box-shadow: 0 2px 12px var(--c-primary-a);
}
.option:hover:not(.is-correct):not(.is-incorrect):not(.was-attempted):not(.is-dimmed) .option-letter {
  background: var(--c-primary);
  color: #fff;
  border-color: var(--c-primary);
}

/* Correct */
.option.is-correct {
  background: var(--c-ok-bg); border-color: var(--c-ok);
  box-shadow: 0 0 0 3px var(--c-ok-a);
  animation: correctPulse .6s var(--ease);
}
.option.is-correct .option-letter {
  background: var(--c-ok); color: #fff; border-color: var(--c-ok);
}
.option.is-correct .option-text { font-weight: 600; }

/* Incorrect */
.option.is-incorrect {
  background: var(--c-err-bg); border-color: var(--c-err);
  animation: shake .4s var(--ease);
}
.option.is-incorrect .option-letter {
  background: var(--c-err); color: #fff; border-color: var(--c-err);
}

/* Attempted wrong (not yet revealed) */
.option.was-attempted {
  background: var(--c-warn-bg); border-color: var(--c-warn);
  cursor: not-allowed;
  animation: shake .35s var(--ease);
}
.option.was-attempted .option-letter {
  background: var(--c-warn); color: #fff; border-color: var(--c-warn);
}
.option.was-attempted:hover { transform: none; box-shadow: none; }

/* Dimmed (unchosen options after reveal) */
.option.is-dimmed { opacity: .4; }

/* Feedback inside option */
.option-feedback {
  padding: .7rem 1rem .7rem 4rem;
  background: var(--c-warn-a);
  border-top: 1px solid var(--c-warn);
  font-size: .85rem; color: var(--c-text); line-height: 1.6;
}
.option-feedback p { margin: 0; }

/* ════════════════════════════════════
   ANSWER SECTION
   ════════════════════════════════════ */
.answer-box {
  margin-top: 1.5rem; padding: 1.4rem;
  background: var(--c-ok-bg);
  border: 1.5px solid var(--c-ok);
  border-radius: var(--radius-sm);
  animation: slideUp .35s var(--ease-out);
}
.answer-correct {
  font-weight: 700; color: var(--c-ok); font-size: 1rem; margin-bottom: .85rem;
  padding: .65rem .95rem; border-radius: var(--radius-xs);
  background: var(--c-ok-a);
  display: flex; align-items: center; gap: .35rem;
}

/* ════════════════════════════════════
   EXPLANATION BOX
   ════════════════════════════════════ */
.explain-box {
  background: var(--c-surface);
  border: 1px solid var(--c-border);
  border-radius: var(--radius-sm);
  padding: 1.4rem;
  margin-top: .85rem;
}
.explain-label {
  font-size: .82rem; font-weight: 700; color: var(--c-primary);
  margin-bottom: .85rem; padding-bottom: .55rem;
  border-bottom: 2px solid var(--c-primary);
  display: flex; align-items: center; gap: .4rem;
}
.explain-body {
  font-size: .9rem; line-height: 1.85; color: var(--c-text);
}

/* Explanation inner */
.exp-heading {
  font-size: .92rem; font-weight: 700; color: var(--c-primary);
  margin: 1.15rem 0 .45rem; padding-bottom: .35rem;
  border-bottom: 1px dashed var(--c-border);
}
.explain-body .exp-heading:first-child { margin-top: 0; }

.exp-text { margin: .45rem 0; line-height: 1.85; }

.exp-list {
  list-style: none; padding: 0; margin: .45rem 0;
  display: flex; flex-direction: column; gap: .4rem;
}
.exp-list li {
  padding: .6rem .9rem;
  background: var(--c-surface2);
  border-left: 3px solid var(--c-primary);
  border-radius: 0 var(--radius-xs) var(--radius-xs) 0;
  font-size: .85rem; line-height: 1.65;
}
.exp-list li strong { color: var(--c-primary); }

.exp-numbered-item {
  margin: .65rem 0; padding: .9rem 1.1rem;
  background: var(--c-surface2);
  border: 1px solid var(--c-border);
  border-radius: var(--radius-sm);
}
.exp-numbered-title {
  font-weight: 700; font-size: .9rem; color: var(--c-primary); margin-bottom: .4rem;
}
.exp-numbered-item .exp-list { margin: .25rem 0 0; }
.exp-numbered-item .exp-list li {
  background: var(--c-surface); padding: .45rem .7rem; font-size: .82rem;
}

.exp-divider {
  border: none; height: 1px; margin: .9rem 0;
  background: linear-gradient(90deg, var(--c-primary), transparent);
  opacity: .25;
}

/* ════════════════════════════════════
   AI EXPLANATION
   ════════════════════════════════════ */
.ai-box { margin-top: .85rem; }

.btn-ai {
  padding: .75rem 1.35rem; border: none; border-radius: var(--radius-sm);
  background: linear-gradient(135deg, #6366f1, #7c3aed);
  color: #fff; font-weight: 600; font-size: .9rem;
  cursor: pointer;
  transition: all .2s var(--ease);
  box-shadow: 0 2px 8px rgba(99,102,241,.2);
}
.btn-ai:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(99,102,241,.3);
}
.btn-ai:disabled { opacity: .6; cursor: wait; transform: none; }

.ai-explanation {
  padding: .9rem 1.1rem; border-radius: var(--radius-sm);
  background: linear-gradient(135deg, rgba(99,102,241,.06), rgba(124,58,237,.04));
  border: 1px solid rgba(99,102,241,.18);
  font-size: .9rem; line-height: 1.75;
}
.ai-error {
  padding: .65rem .9rem; border-radius: var(--radius-sm);
  background: var(--c-err-bg); color: var(--c-err); font-size: .85rem;
}
.loading-spinner {
  padding: .65rem; font-size: .9rem; color: var(--c-text2);
}

/* ════════════════════════════════════
   BUTTONS
   ════════════════════════════════════ */
.btn-ghost {
  background: none; border: none; color: var(--c-text);
  font-weight: 600; font-size: .88rem; cursor: pointer;
  padding: .45rem .85rem; border-radius: var(--radius-sm);
  transition: all .2s var(--ease);
}
.btn-ghost:hover { background: var(--c-surface2); }

.btn-outline {
  background: var(--c-surface); border: 1.5px solid var(--c-border);
  color: var(--c-text); font-weight: 600; font-size: .85rem;
  padding: .6rem 1.1rem; border-radius: var(--radius-sm);
  cursor: pointer; transition: all .2s var(--ease);
}
.btn-outline:hover {
  border-color: var(--c-primary); color: var(--c-primary);
  background: var(--c-primary-a);
}

/* ════════════════════════════════════
   ACTIONS BAR
   ════════════════════════════════════ */
.actions {
  display: flex; flex-wrap: wrap; gap: .5rem; justify-content: center;
}

/* ════════════════════════════════════
   FOOTER
   ════════════════════════════════════ */
.foot {
  text-align: center; padding: 2rem 1rem;
  font-size: .75rem; color: var(--c-text3);
}

/* ════════════════════════════════════
   LIST VIEW
   ════════════════════════════════════ */
.q-list { display: flex; flex-direction: column; gap: .85rem; }

.list-question-card {
  background: var(--c-surface); border: 1px solid var(--c-border);
  border-radius: var(--radius-sm); padding: 1.15rem;
  transition: all .2s var(--ease);
}
.list-question-card:hover { box-shadow: var(--shadow-md); }
.list-question-header {
  display: flex; align-items: center; gap: .55rem; margin-bottom: .55rem;
}
.list-question-num {
  font-size: .72rem; font-weight: 700; background: var(--c-primary);
  color: #fff; padding: .22rem .55rem; border-radius: 4px;
}
.list-question-text {
  font-size: .9rem; line-height: 1.65; margin-bottom: .55rem; white-space: pre-wrap;
}
.list-options { display: flex; flex-direction: column; gap: .35rem; margin-bottom: .6rem; }
.list-option {
  font-size: .82rem; padding: .42rem .65rem;
  border-radius: var(--radius-xs); background: var(--c-surface2);
}
.list-option.correct-preview {
  background: var(--c-ok-bg); font-weight: 600; color: var(--c-ok);
}
.btn-jump {
  background: var(--c-primary); color: #fff; border: none;
  padding: .45rem .95rem; border-radius: var(--radius-xs);
  font-size: .82rem; font-weight: 600; cursor: pointer;
  transition: all .2s var(--ease);
}
.btn-jump:hover {
  background: var(--c-primary2);
  transform: translateY(-1px);
  box-shadow: 0 3px 10px rgba(99,102,241,.2);
}

/* ════════════════════════════════════
   FINISH BANNER
   ════════════════════════════════════ */
.finish-banner {
  background: linear-gradient(135deg, var(--c-primary), #7c3aed, #6366f1);
  background-size: 200% 200%;
  animation: slideUp .4s var(--ease-out), gradientShift 6s ease infinite;
  color: #fff; border-radius: var(--radius);
  padding: 2.5rem 1.75rem; text-align: center;
  margin-bottom: 1.25rem;
  box-shadow: 0 8px 32px rgba(99,102,241,.3);
}
.finish-icon  { font-size: 3.5rem; margin-bottom: .65rem; }
.finish-title { font-size: 1.5rem; font-weight: 800; margin-bottom: .6rem; letter-spacing: -.01em; }
.finish-score { font-size: 1.02rem; opacity: .9; margin-bottom: .3rem; }
.finish-percent {
  font-size: 2.8rem; font-weight: 800;
  background: rgba(255,255,255,.18); display: inline-block;
  padding: .3rem 1.5rem; border-radius: var(--radius);
  margin: .6rem 0 1.15rem;
  backdrop-filter: blur(8px);
  border: 1px solid rgba(255,255,255,.15);
}
.finish-actions {
  display: flex; flex-wrap: wrap; gap: .6rem; justify-content: center;
}
.btn-finish {
  padding: .7rem 1.35rem; border: 2px solid #fff; border-radius: var(--radius-sm);
  background: rgba(255,255,255,.18); color: #fff;
  font-weight: 700; font-size: .9rem; cursor: pointer;
  transition: all .2s var(--ease);
  backdrop-filter: blur(8px);
}
.btn-finish:hover {
  background: rgba(255,255,255,.32);
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(255,255,255,.15);
}
.btn-finish-alt { border-color: rgba(255,255,255,.4); background: rgba(255,255,255,.08); }
.btn-finish-alt:hover { background: rgba(255,255,255,.22); }

/* ════════════════════════════════════
   KEYFRAME ANIMATIONS
   ════════════════════════════════════ */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(8px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes slideUp {
  from { opacity: 0; transform: translateY(20px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes correctPulse {
  0%   { box-shadow: 0 0 0 0 var(--c-ok-a); }
  50%  { box-shadow: 0 0 0 8px var(--c-ok-a); }
  100% { box-shadow: 0 0 0 3px var(--c-ok-a); }
}
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  20%      { transform: translateX(-6px); }
  40%      { transform: translateX(6px); }
  60%      { transform: translateX(-4px); }
  80%      { transform: translateX(4px); }
}
@keyframes gradientShift {
  0%   { background-position: 0% 50%; }
  50%  { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* ════════════════════════════════════
   RESPONSIVE
   ════════════════════════════════════ */
@media (max-width: 640px) {
  .hero       { padding: 2.25rem 1rem 2rem; }
  .hero-title { font-size: 1.4rem; }
  .hero-sub   { font-size: .92rem; }
  .wrap       { padding: 1.25rem .85rem; }
  .grid       { grid-template-columns: 1fr; }
  .card       { padding: 1.15rem; }
  .q-text     { font-size: .98rem; }
  .option-main { padding: .8rem .9rem; gap: .7rem; }
  .option     { font-size: .9rem; }
  .option-letter { width: 1.8rem; height: 1.8rem; min-width: 1.8rem; font-size: .72rem; }
  .option-feedback { padding-left: 3.4rem; }
  .actions    { flex-direction: column; }
  .actions .btn-outline { width: 100%; text-align: center; }
  .question-dot { width: 1.9rem; height: 1.9rem; font-size: .65rem; }
  .btn-dot-nav, .dot-nav-btn { width: 1.9rem; height: 1.9rem; font-size: 1rem; }
  .finish-banner { padding: 2rem 1.25rem; }
  .finish-percent { font-size: 2.2rem; }
}

@media (max-width: 380px) {
  .hero-title { font-size: 1.2rem; }
  .question-dot { width: 1.7rem; height: 1.7rem; font-size: .6rem; }
  .btn-dot-nav, .dot-nav-btn { width: 1.7rem; height: 1.7rem; }
  .option-letter { width: 1.65rem; height: 1.65rem; min-width: 1.65rem; font-size: .68rem; }
  .option-feedback { padding-left: 3.1rem; }
}
